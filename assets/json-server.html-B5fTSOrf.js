import{_ as a,c as n,e,o as t}from"./app-D9fezM6y.js";const p={};function o(r,s){return t(),n("div",null,s[0]||(s[0]=[e(`<h2 id="json-server" tabindex="-1"><a class="header-anchor" href="#json-server"><span>JSON Server</span></a></h2><p>模拟数据接口</p><h3 id="开始" tabindex="-1"><a class="header-anchor" href="#开始"><span>开始</span></a></h3><p>安装</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> json-server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>创建一个 db.json 文件</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">	<span class="token property">&quot;posts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;json-server&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typicode&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token property">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some comment&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;postId&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token property">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typicode&quot;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>启动</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">json-server <span class="token parameter variable">--watch</span> db.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><blockquote><p>注意：</p><ul><li>POST, PUT, PATCH, DELETE 请求带来的改变会出现在 db.json 中</li><li>请求体必须是对象</li><li>id 不可变。使用 PUT / PATCH 请求改变 id 的值将会被忽略，用 POST 创建的 id 也不能与已有的重复</li><li>POST / PUT / PATCH 请求必须设置 <code>Content-Type: application/json</code></li></ul></blockquote><h3 id="路由" tabindex="-1"><a class="header-anchor" href="#路由"><span>路由</span></a></h3><h4 id="默认路由" tabindex="-1"><a class="header-anchor" href="#默认路由"><span>默认路由</span></a></h4><p>基于上述的 db.json，所有的默认路由如下：</p><table><thead><tr><th>路由</th><th>描述</th></tr></thead><tbody><tr><td><code>GET /posts</code></td><td>所有的 posts</td></tr><tr><td><code>GET /posts/1</code></td><td>单个 post</td></tr><tr><td><code>GET /profile</code></td><td>profile 对象</td></tr><tr><td><code>POST /posts</code></td><td>创建一个 post</td></tr><tr><td><code>POST /profile</code></td><td>创建一个 profile</td></tr><tr><td><code>PUT /posts/1</code></td><td>替换一个 post</td></tr><tr><td><code>PUT /profile</code></td><td>替换一个 profile</td></tr><tr><td><code>PATCH /posts/1</code></td><td>更新一个 post</td></tr><tr><td><code>PATCH /profile</code></td><td>更新一个 profile</td></tr><tr><td><code>DELETE /posts/1</code></td><td>删除一个 post</td></tr></tbody></table><h4 id="过滤" tabindex="-1"><a class="header-anchor" href="#过滤"><span>过滤</span></a></h4><p>用 <code>.</code> 访问深层属性</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?title<span class="token operator">=</span>json-server<span class="token operator">&amp;</span><span class="token assign-left variable">author</span><span class="token operator">=</span>typicode</span>
<span class="line">GET /comments?author.name<span class="token operator">=</span>typicode</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="分页" tabindex="-1"><a class="header-anchor" href="#分页"><span>分页</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?_page<span class="token operator">=</span><span class="token number">7</span></span>
<span class="line">GET /posts?_page<span class="token operator">=</span><span class="token number">7</span><span class="token operator">&amp;</span><span class="token assign-left variable">_limit</span><span class="token operator">=</span><span class="token number">20</span> <span class="token comment"># _limit 默认为 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="排序" tabindex="-1"><a class="header-anchor" href="#排序"><span>排序</span></a></h4><p>默认升序，降序加 <code>_order=desc</code></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?_sort<span class="token operator">=</span>views</span>
<span class="line">GET /posts/1/comments?_sort<span class="token operator">=</span>votes<span class="token operator">&amp;</span><span class="token assign-left variable">_order</span><span class="token operator">=</span>desc</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 多个字段排序</span></span>
<span class="line">GET /posts?_sort<span class="token operator">=</span>user,views<span class="token operator">&amp;</span><span class="token assign-left variable">_order</span><span class="token operator">=</span>desc,asc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="切片" tabindex="-1"><a class="header-anchor" href="#切片"><span>切片</span></a></h4><p>行为同 Array.slice，不包含 _end</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?_start<span class="token operator">=</span><span class="token number">20</span><span class="token operator">&amp;</span><span class="token assign-left variable">_end</span><span class="token operator">=</span><span class="token number">30</span></span>
<span class="line">GET /posts/1/comments?_start<span class="token operator">=</span><span class="token number">20</span><span class="token operator">&amp;</span><span class="token assign-left variable">_end</span><span class="token operator">=</span><span class="token number">30</span></span>
<span class="line">GET /posts/1/comments?_start<span class="token operator">=</span><span class="token number">20</span><span class="token operator">&amp;</span><span class="token assign-left variable">_limit</span><span class="token operator">=</span><span class="token number">10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="操作符" tabindex="-1"><a class="header-anchor" href="#操作符"><span>操作符</span></a></h4><p><code>_gte</code> <code>_lte</code>，取得范围内的值</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?views_gte<span class="token operator">=</span><span class="token number">10</span><span class="token operator">&amp;</span><span class="token assign-left variable">views_lte</span><span class="token operator">=</span><span class="token number">20</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p><code>_ne</code>，排除值</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?id_ne<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p><code>_like</code>，模糊查询（可以使用 RegExp）</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?title_like<span class="token operator">=</span>server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="全文搜索" tabindex="-1"><a class="header-anchor" href="#全文搜索"><span>全文搜索</span></a></h4><p><code>q</code> 参数，搜索所有的字段</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?q<span class="token operator">=</span>internet</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h4 id="关系" tabindex="-1"><a class="header-anchor" href="#关系"><span>关系</span></a></h4><p><code>_embed</code>，获取子资源</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts?_embed<span class="token operator">=</span>comments</span>
<span class="line">GET /posts/1?_embed<span class="token operator">=</span>comments</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p><code>_expand</code>，获取父资源</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /comments?_expand<span class="token operator">=</span>post</span>
<span class="line">GET /comments/1?_expand<span class="token operator">=</span>post</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>创建或者获取嵌套资源</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">GET /posts/1/comments</span>
<span class="line">POST /posts/1/comments</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div>`,42)]))}const c=a(p,[["render",o]]),i=JSON.parse('{"path":"/general/frontend/tools/json-server.html","title":"小工具","lang":"zh-CN","frontmatter":{"title":"小工具"},"git":{"updatedTime":1748428667000,"contributors":[{"name":"zhouling","username":"zhouling","email":"1309515883@qq.com","commits":1,"url":"https://github.com/zhouling"},{"name":"carla","username":"carla","email":"1309515883@qq.com","commits":1,"url":"https://github.com/carla"}],"changelog":[{"hash":"ae15eecadccf3c79390038ae2dbb5a221950c243","time":1748428667000,"email":"1309515883@qq.com","author":"carla","message":"调整目录"},{"hash":"334420ebde652338a6c33653a4290c93ac9ca7b9","time":1691024667000,"email":"1309515883@qq.com","author":"zhouling","message":"json-server简介"}]},"filePathRelative":"general/frontend/tools/json-server.md"}');export{c as comp,i as data};
